<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0f172a">
    <meta name="description" content="Manage your trading preferences and system settings for SutrAlgo">
    <title>Settings - SutrAlgo</title>
    <link rel="icon" type="image/png" href="/images/favicon.PNG">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@400;500;600;700;800;900&family=Work+Sans:wght@300;400;500;600;700&family=Roboto+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Modern CSS -->
    <link rel="stylesheet" href="/css/main.css">

    <!-- Theme Toggle Script (load early to prevent flash) -->
    <script src="js/theme-toggle.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Navigation bar will be inserted here by unified-navbar.js -->

        <!-- Page Header -->
        <div class="header">
            <h1 class="page-title">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path d="M12 1v6M12 17v6M4.22 4.22l4.24 4.25M15.54 15.54l4.25 4.25M1 12h6M17 12h6M4.22 19.78l4.24-4.24M15.54 8.46l4.25-4.24"></path>
                </svg>
                Settings
            </h1>
            <p class="page-description">Manage your trading preferences and system configuration</p>
        </div>

        <!-- Settings Container -->
        <div class="settings-container">
            <!-- Trading Parameters -->
            <section class="settings-section card">
                <h2 class="section-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="12" y1="20" x2="12" y2="10"></line>
                        <line x1="18" y1="20" x2="18" y2="4"></line>
                        <line x1="6" y1="20" x2="6" y2="16"></line>
                    </svg>
                    Trading Parameters
                </h2>

                <div class="setting-item">
                    <label for="stop-loss-percent">Default Stop Loss (%)</label>
                    <input type="number" id="stop-loss-percent"
                           class="settings-input" data-setting-key="default_stop_loss_percent"
                           min="1" max="20" step="0.5">
                    <span class="setting-help">Default stop loss percentage for new trades</span>
                </div>

                <div class="setting-item">
                    <label for="target-percent">Default Target (%)</label>
                    <input type="number" id="target-percent"
                           class="settings-input" data-setting-key="default_target_percent"
                           min="1" max="20" step="0.5">
                    <span class="setting-help">Default profit target percentage for new trades</span>
                </div>

                <div class="setting-item">
                    <label for="max-positions-total">Max Positions (Total)</label>
                    <input type="number" id="max-positions-total"
                           class="settings-input" data-setting-key="max_positions_total"
                           min="1" max="50">
                    <span class="setting-help">Maximum number of active positions across all markets</span>
                </div>

                <div class="setting-item">
                    <label for="max-positions-per-market">Max Positions (Per Market)</label>
                    <input type="number" id="max-positions-per-market"
                           class="settings-input" data-setting-key="max_positions_per_market"
                           min="1" max="20">
                    <span class="setting-help">Maximum positions per market (India, UK, US)</span>
                </div>

                <div class="setting-item">
                    <label for="min-dti-threshold">Min DTI Threshold</label>
                    <input type="number" id="min-dti-threshold"
                           class="settings-input" data-setting-key="min_dti_threshold"
                           min="-100" max="0" step="1">
                    <span class="setting-help">Signals with DTI above this will be filtered out</span>
                </div>
            </section>

            <!-- Telegram Alerts -->
            <section class="settings-section card">
                <h2 class="section-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                    </svg>
                    Telegram Alerts
                </h2>

                <div class="setting-item">
                    <label class="checkbox-label">
                        <input type="checkbox" id="telegram-enabled">
                        <span>Enable Telegram Alerts</span>
                    </label>
                    <span class="setting-help">Receive trading alerts via Telegram</span>
                </div>

                <div class="setting-item">
                    <label>Alert Types:</label>
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="alert-target">
                            <span>Target Reached</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="alert-stoploss">
                            <span>Stop Loss Hit</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="alert-manual">
                            <span>Manual Exits</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="alert-conviction">
                            <span>High Conviction Signals</span>
                        </label>
                    </div>
                </div>
            </section>

            <!-- Signal Automation -->
            <section class="settings-section card">
                <h2 class="section-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="16 18 22 12 16 6"></polyline>
                        <polyline points="8 6 2 12 8 18"></polyline>
                    </svg>
                    Signal Automation
                </h2>

                <div class="setting-item">
                    <label class="checkbox-label">
                        <input type="checkbox" id="auto-add-signals">
                        <span>Auto-add high conviction signals as trades</span>
                    </label>
                    <span class="setting-help">Automatically convert 7 AM signals into active trades</span>
                </div>
            </section>

            <!-- Initial Capital -->
            <section class="settings-section card">
                <h2 class="section-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="12" y1="1" x2="12" y2="23"></line>
                        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                    </svg>
                    Initial Capital
                </h2>

                <div class="setting-item">
                    <label for="capital-india">India (₹)</label>
                    <input type="number" id="capital-india"
                           class="settings-input" data-setting-key="initial_capital_india"
                           min="0" step="10000">
                    <span class="setting-help">Starting capital for Indian market trades</span>
                </div>

                <div class="setting-item">
                    <label for="capital-uk">UK (£)</label>
                    <input type="number" id="capital-uk"
                           class="settings-input" data-setting-key="initial_capital_uk"
                           min="0" step="100">
                    <span class="setting-help">Starting capital for UK market trades</span>
                </div>

                <div class="setting-item">
                    <label for="capital-us">US ($)</label>
                    <input type="number" id="capital-us"
                           class="settings-input" data-setting-key="initial_capital_us"
                           min="0" step="100">
                    <span class="setting-help">Starting capital for US market trades</span>
                </div>
            </section>

            <!-- Action Buttons -->
            <div class="settings-actions">
                <button id="save-settings-btn" class="btn btn-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                        <polyline points="17 21 17 13 7 13 7 21"></polyline>
                        <polyline points="7 3 7 8 15 8"></polyline>
                    </svg>
                    Save Settings
                </button>
                <button id="reset-defaults-btn" class="btn btn-secondary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="1 4 1 10 7 10"></polyline>
                        <polyline points="23 20 23 14 17 14"></polyline>
                        <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
                    </svg>
                    Reset to Defaults
                </button>
            </div>
        </div>

        <!-- Notification container -->
        <div id="notification-container"></div>

        <!-- Dark Mode Toggle -->
        <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode">
            <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="5"></circle>
                <line x1="12" y1="1" x2="12" y2="3"></line>
                <line x1="12" y1="21" x2="12" y2="23"></line>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                <line x1="1" y1="12" x2="3" y2="12"></line>
                <line x1="21" y1="12" x2="23" y2="12"></line>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
            <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
        </button>
    </div>

    <!-- Legal Footer -->
    <footer class="legal-footer">
        <div class="footer-content">
            <div class="footer-links">
                <a href="terms.html" class="footer-link">Terms of Service</a>
                <a href="privacy.html" class="footer-link">Privacy Policy</a>
                <a href="data-management.html" class="footer-link">Data Management</a>
                <span class="footer-text">© 2025 SutrAlgo - Educational tools only, not investment advice</span>
            </div>
            <div class="footer-disclaimer">
                <p>Past performance is not a reliable indicator of future results. You accept full responsibility for all investment decisions.</p>
            </div>
        </div>
    </footer>

    <!-- Settings UI Script -->
    <script src="/js/settings-ui.js"></script>

    <!-- Unified Navigation Bar -->
    <script src="js/unified-navbar.js"></script>

    <!-- Initialize -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            SettingsUI.initializeSettings();
        });
    </script>
</body>
</html>
