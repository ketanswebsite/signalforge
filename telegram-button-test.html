<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram Button Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f7fa;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .nav-bar {
            display: flex;
            align-items: center;
            gap: 20px;
            background: #ffffff;
            padding: 15px 20px;
            border-radius: 8px;
            border: 1px solid #e1e5e9;
            margin-bottom: 30px;
        }
        
        .app-title {
            margin: 0;
            color: #2c3e50;
        }
        
        .nav-links {
            display: flex;
            gap: 15px;
            margin-left: auto;
        }
        
        .btn-nav {
            padding: 8px 16px;
            border-radius: 6px;
            border: 1px solid #e1e5e9;
            background: white;
            color: #2c3e50;
            text-decoration: none;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .btn-nav:hover {
            background: #f8f9fa;
            border-color: #d1d5db;
        }
        
        .nav-link {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            border-radius: 6px;
            border: 1px solid #e1e5e9;
            background: white;
            color: #2c3e50;
            text-decoration: none;
            font-size: 14px;
        }
        
        .test-info {
            background: #f0f9ff;
            border: 1px solid #0ea5e9;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .success {
            background: #f0fdf4;
            border-color: #22c55e;
            color: #166534;
        }
        
        pre {
            background: #1e293b;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            font-size: 13px;
        }
        
        .mobile-nav-drawer {
            display: none;
        }
        
        .drawer-nav-links {
            display: none;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="header">
            <h1>üß™ Telegram Button Test</h1>
            <p>Testing the replacement of alerts button with Telegram subscription button</p>
        </div>
        
        <div class="test-info">
            <h3>üéØ Test Configuration</h3>
            <ul>
                <li><strong>Bot ID:</strong> t.me/MySignalForgeBot</li>
                <li><strong>Deep Link:</strong> ?start=all (subscribe to all signals)</li>
                <li><strong>Button Location:</strong> Before "Signal Management" link</li>
            </ul>
        </div>
        
        <!-- Simulated navigation bar -->
        <div class="nav-bar">
            <h1 class="app-title">SignalForge</h1>
            <div class="nav-links">
                <!-- Telegram button will be inserted here -->
                <a href="trades.html" class="nav-link">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
                        <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
                    </svg>
                    Signal Management
                </a>
            </div>
        </div>
        
        <div class="mobile-nav-drawer">
            <div class="drawer-nav-links">
                <!-- Mobile telegram button will be inserted here -->
            </div>
        </div>
        
        <div id="test-results">
            <h3>üîç Test Results</h3>
            <div id="button-status">‚è≥ Testing...</div>
        </div>
        
        <div class="test-info">
            <h4>üì± Expected Result:</h4>
            <pre>‚úÖ Telegram button should appear before "Signal Management" link
‚úÖ Button text: "üìà Subscribe to Telegram"  
‚úÖ Button link: https://t.me/MySignalForgeBot?start=all
‚úÖ Opens in new tab when clicked
‚úÖ Telegram blue gradient styling</pre>
        </div>
    </div>
    
    <!-- Load the modified alerts-ui.js -->
    <script src="public/js/alerts-ui.js"></script>
    
    <script>
        // Test the functionality
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üß™ Starting Telegram button test...');
            
            // Initialize the alerts UI (which now creates telegram button)
            if (typeof AlertsUI !== 'undefined') {
                AlertsUI.init().then(() => {
                    testTelegramButton();
                });
            } else {
                setTimeout(testTelegramButton, 2000);
            }
        });
        
        function testTelegramButton() {
            const statusEl = document.getElementById('button-status');
            const results = [];
            
            // Test 1: Check if button exists
            const telegramButton = document.querySelector('.telegram-button');
            if (telegramButton) {
                results.push('‚úÖ Telegram button found in DOM');
                
                // Test 2: Check link
                if (telegramButton.href === 'https://t.me/MySignalForgeBot?start=all') {
                    results.push('‚úÖ Correct deep link URL');
                } else {
                    results.push(`‚ùå Wrong URL: ${telegramButton.href}`);
                }
                
                // Test 3: Check target
                if (telegramButton.target === '_blank') {
                    results.push('‚úÖ Opens in new tab');
                } else {
                    results.push('‚ùå Doesn\'t open in new tab');
                }
                
                // Test 4: Check text content
                if (telegramButton.textContent.includes('Subscribe to Telegram')) {
                    results.push('‚úÖ Correct button text');
                } else {
                    results.push(`‚ùå Wrong text: ${telegramButton.textContent}`);
                }
                
                // Test 5: Check styling
                const computedStyle = getComputedStyle(telegramButton);
                if (computedStyle.background.includes('linear-gradient') || computedStyle.backgroundColor.includes('rgb')) {
                    results.push('‚úÖ Has Telegram styling');
                } else {
                    results.push('‚ùå Missing Telegram styling');
                }
                
            } else {
                results.push('‚ùå Telegram button not found');
                
                // Debug: Check what buttons exist
                const allButtons = document.querySelectorAll('button, a[class*="button"]');
                results.push(`üîç Found ${allButtons.length} buttons/links`);
                allButtons.forEach((btn, i) => {
                    results.push(`  ${i+1}. ${btn.className} - ${btn.textContent?.trim()}`);
                });
            }
            
            // Test mobile button
            const mobileTelegramButton = document.querySelector('.telegram-mobile-link');
            if (mobileTelegramButton) {
                results.push('‚úÖ Mobile telegram button found');
            } else {
                results.push('‚ö†Ô∏è Mobile telegram button not found (may be intentional)');
            }
            
            statusEl.innerHTML = '<pre>' + results.join('\n') + '</pre>';
            
            // Log to console
            console.log('üß™ Test Results:', results);
        }
    </script>
</body>
</html>